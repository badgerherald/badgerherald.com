/*! Built with http://stenciljs.com */
const{h:t}=window.exa;import{ExaMenuDropdownStyle as e}from"./chunk1.js";class i{constructor(){this.imgLoaded=!1}loadFeaturedMedia(){this.imgLoaded||this.posts.map(t=>{this.loadFeaturedMediaForPost(t)})}loadFeaturedMediaForPost(t){t.featured_media&&!t.imgsrc&&(this.imgLoaded=!0,new WPAPI({endpoint:exa.api_url}).media().id(t.featured_media).then(e=>this.mediaLoadDidFinish(e,t)).catch(this.mediaLoadDidFail.bind(this)))}mediaLoadDidFinish(t,e){e.imgsrc=t.media_details.sizes["post-thumbnail"]?t.media_details.sizes["post-thumbnail"].source_url:"",this.imgsrc=e.imgsrc}mediaLoadDidFail(t){console.log(t)}render(){return this.imgLoaded||this.loadFeaturedMedia(),t("div",null,t("div",{class:"menu"},t("h4",null,this.title),t("ul",null,this.menuItems.map(e=>t("li",null,e.title)))),t("ul",{class:"teasers"},this.posts.map(e=>t("li",null,t("exa-teaser",{imgsrc:e.imgsrc,url:e.link,title:e.title.rendered,subhead:e.subhead?e.subhead:e.excerpt.rendered})))),t("div",{class:"clearfix"}))}static get is(){return"exa-menu-dropdown"}static get properties(){return{imgsrc:{state:!0},menuItems:{type:"Any",attr:"menu-items"},posts:{type:"Any",attr:"posts"},subhead:{type:String,attr:"subhead"},title:{type:String,attr:"title"},url:{type:String,attr:"url"}}}static get style(){return"\@charset \"UTF-8\";exa-menu-dropdown *{box-sizing:border-box}exa-menu-dropdown>div{position:absolute;left:0;background:#fff;width:100%}exa-menu-dropdown>div .clearfix{clear:both}exa-menu-dropdown>div ul{list-style-type:none;margin:0;padding:0}exa-menu-dropdown>div .menu{float:left;width:29.72973%}exa-menu-dropdown>div .menu h4{margin:10px 0;padding:0}exa-menu-dropdown>div .menu ul{font-size:.75em;line-height:1.8em}exa-menu-dropdown>div ul.teasers{width:67.56757%;display:block;margin:0;float:left}exa-menu-dropdown>div ul.teasers li{font-size:.8em;float:right;padding:10px 3.84615%}exa-menu-dropdown>div ul.teasers li img{width:42.30769%;float:right}\@media (min-width:1060px){exa-menu-dropdown>div .menu{width:21.15385%}exa-menu-dropdown>div ul.teasers{width:78.84615%}}"}}class s{loadTeasers(){this.posts||this.category&&this.dropdownStyle==e.Teasers&&new WPAPI({endpoint:exa.api_url}).posts().param("per_page","3").categories(this.category).then(this.teaserLoadDidFinish.bind(this)).catch(this.teaserLoadDidFail.bind(this))}teaserLoadDidFinish(t){this.posts=t}teaserLoadDidFail(t){console.log(t)}hasDropdown(){return this.childmenuitems&&this.dropdownStyle!=e.None}renderDropdown(){if(this.hasDropdown())return this.childmenuitems||this.category?t("exa-menu-dropdown",{posts:this.posts,menuItems:this.childmenuitems,title:this.title}):void 0}render(){const e=(this.hasDropdown()?"dropdown":"")+(this.debug?" debug":"");return t("li",{class:e},t("a",{href:this.url},this.title),this.renderDropdown())}static get is(){return"exa-menu-item"}static get properties(){return{category:{type:Number,attr:"category"},childmenuitems:{type:"Any",attr:"childmenuitems"},debug:{type:Boolean,attr:"debug"},dropdownStyle:{type:"Any",attr:"dropdown-style"},posts:{state:!0},title:{type:String,attr:"title"},url:{type:String,attr:"url"}}}static get style(){return"\@charset \"UTF-8\";exa-menu-item>li.dropdown>a{padding-right:22px}exa-menu-item>li.dropdown>a:after{content:\"d\";font-size:12px;padding-left:2px;transition:margin .1s;font-family:exa;position:absolute}exa-menu-item>li exa-menu-dropdown>div{visibility:hidden;transition:all .15s ease-in-out;margin-top:-6px}exa-menu-item>li.debug exa-menu-dropdown>div,exa-menu-item>li:hover exa-menu-dropdown>div{visibility:visible;margin-top:0;transition:all .2s ease-in-out;transition-delay:.15s}exa-menu-item>li.debug.dropdown a,exa-menu-item>li:hover.dropdown a{background:#fff}exa-menu-item>li.debug.dropdown a>a:after,exa-menu-item>li:hover.dropdown a>a:after{margin-top:3px}exa-menu-item>li.debug.dropdown a>ul,exa-menu-item>li:hover.dropdown a>ul{display:block;position:absolute;top:100%;min-width:200px;background:#fff;list-style-type:none;padding:12px;font-size:18px}exa-menu-item>li.debug.dropdown a>ul a,exa-menu-item>li:hover.dropdown a>ul a{color:#191919}exa-menu-item>li.debug.dropdown a>ul a:hover,exa-menu-item>li:hover.dropdown a>ul a:hover{color:#787878}"}}export{i as ExaMenuDropdown,s as ExaMenuItem};