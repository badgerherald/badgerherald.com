
@mixin socialIcon($char,$color) {
	content: $char;
	background: $color;
	
}

/**
 * Nameplate styles
 *
 */ 
exa-nameplate {
	width: 100%;
	position: relative;
	
	& > bh-grid {
		&::after { // the blue line after the header is this pseudo element
			content:"";
			height: 5px;
			background: $blue;
			border-radius: 1.5px;
			display: block;
			grid-column: leading / tail;
			bottom: 0px;
		}
	}

    a.logo { // let the logo flex some, but never get too big.
		margin-bottom: 12px;
		margin-top: 12px;
		grid-column: grid-start / base3-col2-end;
		max-width: 220px;
		display: block;
		grid-row: 1;
		z-index: 5; // bring in front of the absolutely positioned menu grid
		img {
			height: auto;
			width: 100%;
		}
		&:hover {
			transform: scale(1.02,1.02);
		}
		@include breakpoint('tablet') {
			grid-column: grid-start / base4-col1-end;
		}
	}

	/**
	 * On mobile, .menus is the dropdown container when you tap the 
	 * expand button. 
	 *
	 * On tablet+, it's a transparent container to the left of
	 * the logo.
	 */
    .menus {
		position: absolute;
		display: none;
		margin-top: -9px;
		width: 100%;
		z-index: 9999;
		font-size: 18px;
		grid-row-start: 3;
		grid-column: page-start / page-end;
		&:before {
			// the actual dropdown is a pseudo element
			// to not inturrupt the grid
			display: block;
			background: white;
			grid-column: leading / trailing;
			box-shadow: 0 2px 3px 0 rgba(1,38,94,0.2);
			border-radius: 3px;
			content: "";
			grid-row: 1 / 4;
			@include breakpoint("mobilexl") {
				grid-column: base3-col1-end / trailing;
			}
			@include breakpoint("tablet") {
				display: none;
			}
		}
		&.active {
        	display: grid;
		}
		@include breakpoint("tablet") {
			display: grid;
			position: relative;
			z-index: inherit;
			grid-row: 1;
		}
		/// Positioning the search form
		exa-search-form {
			margin-top:18px;
			grid-column: grid-start / grid-end;
			grid-row: 1;
			@include breakpoint("mobilexl") {
				grid-column: base3-col2-start / grid-end;
			}
			@include breakpoint('tablet') {
				margin-top: 0;
				margin-bottom: 12px;
				grid-column: base4-col2-start / grid-end;
				grid-row: 2;
				align-self: end;
			}
			
			&.focused {
				z-index: 10;
			}
		}

		/// Positioning the menu containers
		wp-menu	menu {
			margin: 0;
			padding: 0;
			float: left;
		}
		wp-menu.primary {
			grid-row: 2;
			grid-column: base3-col2-start / grid-end;
			width: 100%;
			menu {
				width: 100%;
			}
			@include breakpoint("mobilexl") {
				grid-column: base4-col3-start / grid-end;
			}
			@include breakpoint('tablet') {
				margin-bottom: 9px;
				grid-column: base4-col2-start / grid-end;
				grid-row: 2;
				align-self: end;
			}
			
		}
		wp-menu.secondary  {
			grid-row: 2;
			grid-column: grid-start / base3-col1-end;
			menu {
				width: 100%;
			}
			@include breakpoint("mobilexl") {
				grid-column: base3-col2-start / base4-col3-start;
			}
			@include breakpoint('tablet') {
				grid-row: 1;
				grid-column: base4-col2-start / grid-end;
				margin-right: 100px; /// magic number, width of the (3) social icons
				menu {
					width: inherit;
					float: right;
				}
			}
		}
		wp-menu.social {
			grid-row: 3;
			grid-column: grid-start / grid-end;
			margin: 24px 0px;
			menu {
				padding-left: 20px;
			}
			@include breakpoint("mobilexl") {
				grid-column: base3-col2-start / grid-end;
			}
			@include breakpoint('tablet') {
				margin: 0px;
				grid-row: 1;
				grid-column: base4-col2-start / grid-end;
				menu {
					float: right;
				}
			}
		}

		/// Positioning & styling dropdowns
		wp-menu {
			menu menu {
				display: none;
			}
			@include breakpoint('tablet') {
				& > menu li:hover > menu {
					display: block;
					z-index: 20;
					position: absolute;
				}
				& > menu > li.hasChildren {
					position: relative;
					& > wp-link > a {
						padding-right: 22px !important;
						&:after {
							content: "d";
							font-size: 12px;
							padding-left: 2px;
							transition: margin .1s;
							font-family: $icon;
							position: absolute;
						}
					}
					&:hover {
						background: white;
						& > wp-link a:after {
							margin-top: 3px;
						}
					}
					&:hover > menu {
						& > li a { 
							@include linkColor($black); 
							padding: 3px 0;
							width: 100%;
						}
						display: block;
						position: absolute;			
						top: 100%;
						min-width: 200px;
						background: white;
						list-style-type: none;
						padding: 12px;
						font-size: 18px;
					}
				}
			}
		}

		/// Styling the list & links:
		wp-menu	menu {
			list-style-type: none;
		}
		wp-menu > menu > li {
			@include breakpoint('tablet') {
				display: inline-block; 
			}
		}
		wp-menu	menu > li a {
			font-family: $headline;
			text-decoration: none;
			line-height: 1.4em;
			display: block;
			&:hover {
				text-decoration: underline;
			}
			@include breakpoint('tablet') {
				display: inline-block;
			}
		}
		wp-menu.primary > menu > li > wp-link > a {
			color: $blue;
			&:hover {
				color: $blueLinkHover;
			}
			font-size: 19px;
			border-bottom: 1px solid $grey;
			border-left: 1px solid $grey;
			padding: 12px 0 12px 20px;
			@include breakpoint('tablet') {
				font-size: 22px;
				border-left: 0;
				border-bottom: 0;
				padding: 6px 9px;
			}
			@include breakpoint('xl') {
				font-size: 26px;
			}
			
		}
		wp-menu.primary > menu > li:last-child > wp-link > a {
			border-bottom: none;
		}
		wp-menu.secondary > menu > li > wp-link > a {
			padding: 3px 0 3px 20px;
			margin-top: 12px;
			color: $black;
			&:hover {
				color: $blue;
			}
			font-size: 16px;
			@include breakpoint('tablet') {
				margin-top: 0;
				padding: 6px 9px;
				font-size: 18px;
			}
		}
		wp-menu.social > menu > li.social {
			display: inline-block;
			margin-right: 10px;
			@include breakpoint('tablet') {
				&:last-child {
					margin-top: 6px;
					margin-right: 0px;
				}
			}
		}
		wp-menu.social > menu > li.social > wp-link > a {
			display: inline;
			position: relative;
			&:hover {
				text-decoration: none;
			}
			&::before {
				font-family: $icon;
				color: $white;
				text-align: center;
				width: 100%;
				display: block;
				border-radius: 2px;
				font-size: 24px;
				line-height: 35px;
				width: 34px;
				height: 34px;
				transition: all .1s;
				@include breakpoint('tablet') {
					font-size: 16px;
					line-height: 26px;
					width: 24px;
					height: 24px;
				}
			}
			&:hover::before {
				transform: scale(1.1,1.1); 
			}
		}
		wp-menu {
			li.twitter a:before { @include socialIcon("t",#0892E3); }
			li.facebook a:before { @include socialIcon("f",#425F9E); }
			li.linkedin a:before { @include socialIcon("l",#0078b6); }
			li.instagram a:before { @include socialIcon("i",#cd486b); }
		}
	}

	/// Hide the mobile "expand" button on desktop
	exa-menu-button {
		grid-column-start: base4-col4-start;
		grid-column-end: trailing;
		grid-row: 1;
		align-self: end;
		@include breakpoint("tablet") {
			display: none;
		}
	}
}
